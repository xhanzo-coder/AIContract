<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>开发交接文档 - 设计到代码实现指南</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #1a202c;
            background: #f7fafc;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }
        
        .section h2 {
            color: #2d3748;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .section h3 {
            color: #4a5568;
            font-size: 1.3rem;
            margin: 25px 0 15px 0;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .code-block .comment {
            color: #68d391;
        }
        
        .code-block .keyword {
            color: #f687b3;
        }
        
        .code-block .string {
            color: #fbb6ce;
        }
        
        .code-block .function {
            color: #90cdf4;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #fef5e7 0%, #fed7aa 100%);
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .highlight-box h4 {
            color: #c05621;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
            border: 1px solid #4fd1c7;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .info-box h4 {
            color: #234e52;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fef5e7 0%, #fed7aa 100%);
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .warning-box h4 {
            color: #c05621;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .card h4 {
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .file-tree {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
        }
        
        .file-tree .folder {
            color: #fbb6ce;
        }
        
        .file-tree .file {
            color: #90cdf4;
        }
        
        .checklist {
            list-style: none;
            padding: 0;
        }
        
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        
        .checklist li:before {
            content: "✅";
            margin-right: 10px;
            font-size: 1.1rem;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .tech-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .tech-item .icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .tech-item .name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .tech-item .version {
            font-size: 0.9rem;
            color: #718096;
        }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 开发交接文档</h1>
            <p>从设计稿到代码实现的完整指南</p>
            <p style="margin-top: 10px; font-size: 1.1rem; opacity: 0.9;">
                设计师：Sophia | 目标：前端工程师团队
            </p>
        </div>

        <!-- 项目概述 -->
        <div class="section">
            <h2>📋 项目概述</h2>
            <p style="font-size: 1.1rem; margin-bottom: 20px;">
                本项目是对现有Streamlit合约档案系统的前端重构，目标是创建一个现代化、用户友好的Web应用界面。
            </p>
            
            <div class="grid-2">
                <div class="card">
                    <h4>🎯 设计目标</h4>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>提升用户体验和界面美观度</li>
                        <li>优化信息架构和交互流程</li>
                        <li>实现响应式设计</li>
                        <li>提高系统可用性和可访问性</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>📊 核心功能</h4>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>文档上传和管理</li>
                        <li>智能搜索和筛选</li>
                        <li>使用统计和可视化</li>
                        <li>系统配置和用户管理</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 技术栈推荐 -->
        <div class="section">
            <h2>🛠️ 推荐技术栈</h2>
            
            <div class="tech-stack">
                <div class="tech-item">
                    <div class="icon">⚛️</div>
                    <div class="name">React</div>
                    <div class="version">v18.2+</div>
                </div>
                <div class="tech-item">
                    <div class="icon">📦</div>
                    <div class="name">Vite</div>
                    <div class="version">v4.0+</div>
                </div>
                <div class="tech-item">
                    <div class="icon">🎨</div>
                    <div class="name">Ant Design</div>
                    <div class="version">v5.0+</div>
                </div>
                <div class="tech-item">
                    <div class="icon">📈</div>
                    <div class="name">ECharts</div>
                    <div class="version">v5.4+</div>
                </div>
                <div class="tech-item">
                    <div class="icon">🔄</div>
                    <div class="name">Redux Toolkit</div>
                    <div class="version">v1.9+</div>
                </div>
                <div class="tech-item">
                    <div class="icon">🌐</div>
                    <div class="name">Axios</div>
                    <div class="version">v1.0+</div>
                </div>
            </div>

            <div class="highlight-box">
                <h4>💡 技术选型说明</h4>
                <p>选择React + Ant Design的组合可以快速实现设计稿中的组件效果，Vite提供快速的开发体验，ECharts满足数据可视化需求。</p>
            </div>
        </div>

        <!-- 项目结构 -->
        <div class="section">
            <h2>📁 项目结构</h2>
            
            <div class="file-tree">
contract-archive-frontend/
├── <span class="folder">public/</span>
│   ├── <span class="file">index.html</span>
│   └── <span class="file">favicon.ico</span>
├── <span class="folder">src/</span>
│   ├── <span class="folder">components/</span>          <span class="comment">// 通用组件</span>
│   │   ├── <span class="folder">Layout/</span>
│   │   │   ├── <span class="file">Sidebar.jsx</span>
│   │   │   ├── <span class="file">Header.jsx</span>
│   │   │   └── <span class="file">MainLayout.jsx</span>
│   │   ├── <span class="folder">Upload/</span>
│   │   │   ├── <span class="file">UploadArea.jsx</span>
│   │   │   └── <span class="file">ProgressList.jsx</span>
│   │   ├── <span class="folder">Search/</span>
│   │   │   ├── <span class="file">SearchBox.jsx</span>
│   │   │   ├── <span class="file">FilterPanel.jsx</span>
│   │   │   └── <span class="file">ResultList.jsx</span>
│   │   └── <span class="folder">Charts/</span>
│   │       ├── <span class="file">StatCard.jsx</span>
│   │       ├── <span class="file">TrendChart.jsx</span>
│   │       └── <span class="file">PieChart.jsx</span>
│   ├── <span class="folder">pages/</span>               <span class="comment">// 页面组件</span>
│   │   ├── <span class="file">HomePage.jsx</span>
│   │   ├── <span class="file">UploadPage.jsx</span>
│   │   ├── <span class="file">SearchPage.jsx</span>
│   │   ├── <span class="file">AnalyticsPage.jsx</span>
│   │   └── <span class="file">SettingsPage.jsx</span>
│   ├── <span class="folder">store/</span>               <span class="comment">// 状态管理</span>
│   │   ├── <span class="file">index.js</span>
│   │   ├── <span class="file">authSlice.js</span>
│   │   ├── <span class="file">documentsSlice.js</span>
│   │   └── <span class="file">searchSlice.js</span>
│   ├── <span class="folder">services/</span>           <span class="comment">// API服务</span>
│   │   ├── <span class="file">api.js</span>
│   │   ├── <span class="file">documents.js</span>
│   │   ├── <span class="file">search.js</span>
│   │   └── <span class="file">analytics.js</span>
│   ├── <span class="folder">hooks/</span>              <span class="comment">// 自定义Hooks</span>
│   │   ├── <span class="file">useApi.js</span>
│   │   ├── <span class="file">useDebounce.js</span>
│   │   └── <span class="file">useAuth.js</span>
│   ├── <span class="folder">styles/</span>             <span class="comment">// 样式文件</span>
│   │   ├── <span class="file">globals.css</span>
│   │   ├── <span class="file">variables.css</span>
│   │   └── <span class="file">components.css</span>
│   ├── <span class="file">App.jsx</span>
│   └── <span class="file">main.jsx</span>
├── <span class="file">package.json</span>
├── <span class="file">vite.config.js</span>
└── <span class="file">README.md</span>
            </div>
        </div>

        <!-- 设计规范 -->
        <div class="section">
            <h2>🎨 设计规范</h2>
            
            <h3>颜色系统</h3>
            <div class="code-block">
<span class="comment">/* CSS变量定义 */</span>
:root {
  <span class="comment">/* 主色调 */</span>
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --primary-color: #667eea;
  --primary-light: #a78bfa;
  --primary-dark: #5a67d8;
  
  <span class="comment">/* 功能色彩 */</span>
  --success-color: #48bb78;
  --warning-color: #ed8936;
  --error-color: #f56565;
  --info-color: #4299e1;
  
  <span class="comment">/* 中性色彩 */</span>
  --gray-50: #f7fafc;
  --gray-100: #edf2f7;
  --gray-200: #e2e8f0;
  --gray-300: #cbd5e0;
  --gray-400: #a0aec0;
  --gray-500: #718096;
  --gray-600: #4a5568;
  --gray-700: #2d3748;
  --gray-800: #1a202c;
  
  <span class="comment">/* 背景色 */</span>
  --bg-primary: #f7fafc;
  --bg-secondary: #ffffff;
  --bg-card: #ffffff;
}
            </div>

            <h3>字体系统</h3>
            <div class="code-block">
<span class="comment">/* 字体定义 */</span>
.font-system {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
               Roboto, 'Helvetica Neue', Arial, sans-serif;
}

<span class="comment">/* 字号层级 */</span>
.text-xs { font-size: 0.75rem; }    <span class="comment">/* 12px */</span>
.text-sm { font-size: 0.875rem; }   <span class="comment">/* 14px */</span>
.text-base { font-size: 1rem; }     <span class="comment">/* 16px */</span>
.text-lg { font-size: 1.125rem; }   <span class="comment">/* 18px */</span>
.text-xl { font-size: 1.25rem; }    <span class="comment">/* 20px */</span>
.text-2xl { font-size: 1.5rem; }    <span class="comment">/* 24px */</span>
.text-3xl { font-size: 1.875rem; }  <span class="comment">/* 30px */</span>
.text-4xl { font-size: 2.25rem; }   <span class="comment">/* 36px */</span>

<span class="comment">/* 字重 */</span>
.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
            </div>

            <h3>间距系统</h3>
            <div class="code-block">
<span class="comment">/* 间距变量 */</span>
:root {
  --spacing-1: 0.25rem;   <span class="comment">/* 4px */</span>
  --spacing-2: 0.5rem;    <span class="comment">/* 8px */</span>
  --spacing-3: 0.75rem;   <span class="comment">/* 12px */</span>
  --spacing-4: 1rem;      <span class="comment">/* 16px */</span>
  --spacing-5: 1.25rem;   <span class="comment">/* 20px */</span>
  --spacing-6: 1.5rem;    <span class="comment">/* 24px */</span>
  --spacing-8: 2rem;      <span class="comment">/* 32px */</span>
  --spacing-10: 2.5rem;   <span class="comment">/* 40px */</span>
  --spacing-12: 3rem;     <span class="comment">/* 48px */</span>
}
            </div>

            <h3>阴影系统</h3>
            <div class="code-block">
<span class="comment">/* 阴影层级 */</span>
.shadow-sm { 
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); 
}
.shadow-md { 
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); 
}
.shadow-lg { 
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12); 
}
.shadow-xl { 
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15); 
}

<span class="comment">/* 特殊阴影 */</span>
.shadow-primary { 
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); 
}
            </div>
        </div>

        <!-- 核心组件实现 -->
        <div class="section">
            <h2>🧩 核心组件实现</h2>
            
            <h3>1. 搜索框组件 (SearchBox.jsx)</h3>
            <div class="code-block">
<span class="keyword">import</span> React, { useState, useCallback } <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> { Input, Tag } <span class="keyword">from</span> <span class="string">'antd'</span>;
<span class="keyword">import</span> { SearchOutlined } <span class="keyword">from</span> <span class="string">'@ant-design/icons'</span>;
<span class="keyword">import</span> { useDebounce } <span class="keyword">from</span> <span class="string">'../hooks/useDebounce'</span>;

<span class="keyword">const</span> <span class="function">SearchBox</span> = ({ onSearch, suggestions = [] }) => {
  <span class="keyword">const</span> [query, setQuery] = useState(<span class="string">''</span>);
  <span class="keyword">const</span> debouncedQuery = useDebounce(query, 300);

  <span class="keyword">const</span> <span class="function">handleSearch</span> = useCallback((value) => {
    setQuery(value);
    onSearch(value);
  }, [onSearch]);

  <span class="keyword">const</span> <span class="function">handleSuggestionClick</span> = (suggestion) => {
    setQuery(suggestion);
    onSearch(suggestion);
  };

  <span class="keyword">return</span> (
    &lt;div className=<span class="string">"search-container"</span>&gt;
      &lt;Input
        size=<span class="string">"large"</span>
        placeholder=<span class="string">"🔍 帮我找一下设备采购的合约..."</span>
        prefix={&lt;SearchOutlined /&gt;}
        value={query}
        onChange={(e) =&gt; handleSearch(e.target.value)}
        className=<span class="string">"search-input"</span>
      /&gt;
      
      {suggestions.length &gt; 0 && (
        &lt;div className=<span class="string">"suggestions-container"</span>&gt;
          {suggestions.map((suggestion, index) =&gt; (
            &lt;Tag
              key={index}
              className=<span class="string">"suggestion-tag"</span>
              onClick={() =&gt; handleSuggestionClick(suggestion)}
            &gt;
              {suggestion}
            &lt;/Tag&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

<span class="keyword">export default</span> SearchBox;
            </div>

            <h3>2. 统计卡片组件 (StatCard.jsx)</h3>
            <div class="code-block">
<span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> { Card, Statistic } <span class="keyword">from</span> <span class="string">'antd'</span>;
<span class="keyword">import</span> { ArrowUpOutlined, ArrowDownOutlined } <span class="keyword">from</span> <span class="string">'@ant-design/icons'</span>;

<span class="keyword">const</span> <span class="function">StatCard</span> = ({ 
  title, 
  value, 
  icon, 
  change, 
  changeType = <span class="string">'positive'</span>,
  gradient 
}) => {
  <span class="keyword">const</span> changeIcon = changeType === <span class="string">'positive'</span> 
    ? &lt;ArrowUpOutlined /&gt; 
    : &lt;ArrowDownOutlined /&gt;;
    
  <span class="keyword">const</span> changeColor = changeType === <span class="string">'positive'</span> 
    ? <span class="string">'#48bb78'</span> 
    : <span class="string">'#f56565'</span>;

  <span class="keyword">return</span> (
    &lt;Card 
      className=<span class="string">"stat-card"</span>
      hoverable
      style={{
        borderRadius: <span class="string">'12px'</span>,
        boxShadow: <span class="string">'0 4px 20px rgba(0,0,0,0.08)'</span>
      }}
    &gt;
      &lt;div className=<span class="string">"stat-header"</span>&gt;
        &lt;div 
          className=<span class="string">"stat-icon"</span>
          style={{ 
            background: gradient,
            borderRadius: <span class="string">'12px'</span>,
            width: <span class="string">'48px'</span>,
            height: <span class="string">'48px'</span>,
            display: <span class="string">'flex'</span>,
            alignItems: <span class="string">'center'</span>,
            justifyContent: <span class="string">'center'</span>,
            fontSize: <span class="string">'1.5rem'</span>,
            color: <span class="string">'white'</span>
          }}
        &gt;
          {icon}
        &lt;/div&gt;
        &lt;div className=<span class="string">"stat-title"</span>&gt;{title}&lt;/div&gt;
      &lt;/div&gt;
      
      &lt;Statistic 
        value={value}
        valueStyle={{ 
          fontSize: <span class="string">'2.5rem'</span>,
          fontWeight: <span class="string">'700'</span>,
          color: gradient.includes(<span class="string">'667eea'</span>) ? <span class="string">'#667eea'</span> : <span class="string">'#48bb78'</span>
        }}
      /&gt;
      
      {change && (
        &lt;div 
          className=<span class="string">"stat-change"</span>
          style={{ color: changeColor }}
        &gt;
          {changeIcon}
          &lt;span style={{ marginLeft: <span class="string">'5px'</span> }}&gt;{change}&lt;/span&gt;
        &lt;/div&gt;
      )}
    &lt;/Card&gt;
  );
};

<span class="keyword">export default</span> StatCard;
            </div>

            <h3>3. 上传区域组件 (UploadArea.jsx)</h3>
            <div class="code-block">
<span class="keyword">import</span> React, { useState } <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> { Upload, message, Progress } <span class="keyword">from</span> <span class="string">'antd'</span>;
<span class="keyword">import</span> { InboxOutlined } <span class="keyword">from</span> <span class="string">'@ant-design/icons'</span>;

<span class="keyword">const</span> { Dragger } = Upload;

<span class="keyword">const</span> <span class="function">UploadArea</span> = ({ onUpload }) => {
  <span class="keyword">const</span> [fileList, setFileList] = useState([]);

  <span class="keyword">const</span> uploadProps = {
    name: <span class="string">'file'</span>,
    multiple: <span class="keyword">true</span>,
    action: <span class="string">'/api/documents/upload'</span>,
    fileList,
    onChange(info) {
      <span class="keyword">const</span> { status } = info.file;
      
      <span class="keyword">if</span> (status === <span class="string">'done'</span>) {
        message.success(`${info.file.name} 文件上传成功`);
        onUpload && onUpload(info.file);
      } <span class="keyword">else if</span> (status === <span class="string">'error'</span>) {
        message.error(`${info.file.name} 文件上传失败`);
      }
      
      setFileList(info.fileList);
    },
    beforeUpload(file) {
      <span class="keyword">const</span> isValidType = [
        <span class="string">'application/pdf'</span>,
        <span class="string">'application/msword'</span>,
        <span class="string">'application/vnd.openxmlformats-officedocument.wordprocessingml.document'</span>,
        <span class="string">'image/jpeg'</span>,
        <span class="string">'image/png'</span>
      ].includes(file.type);
      
      <span class="keyword">if</span> (!isValidType) {
        message.error(<span class="string">'只支持 PDF、Word、JPG、PNG 格式文件'</span>);
        <span class="keyword">return</span> false;
      }
      
      <span class="keyword">const</span> isLt50M = file.size / 1024 / 1024 &lt; 50;
      <span class="keyword">if</span> (!isLt50M) {
        message.error(<span class="string">'文件大小不能超过 50MB'</span>);
        <span class="keyword">return</span> false;
      }
      
      <span class="keyword">return</span> true;
    }
  };

  <span class="keyword">return</span> (
    &lt;div className=<span class="string">"upload-section"</span>&gt;
      &lt;Dragger 
        {...uploadProps}
        className=<span class="string">"upload-dragger"</span>
        style={{
          background: <span class="string">'white'</span>,
          border: <span class="string">'3px dashed #cbd5e0'</span>,
          borderRadius: <span class="string">'16px'</span>,
          padding: <span class="string">'60px 30px'</span>
        }}
      &gt;
        &lt;p className=<span class="string">"ant-upload-drag-icon"</span>&gt;
          &lt;InboxOutlined style={{ fontSize: <span class="string">'4rem'</span>, color: <span class="string">'#cbd5e0'</span> }} /&gt;
        &lt;/p&gt;
        &lt;p className=<span class="string">"ant-upload-text"</span> style={{ fontSize: <span class="string">'1.3rem'</span>, fontWeight: <span class="string">'600'</span> }}&gt;
          拖拽文件到此处或点击上传
        &lt;/p&gt;
        &lt;p className=<span class="string">"ant-upload-hint"</span> style={{ color: <span class="string">'#718096'</span> }}&gt;
          支持 PDF、DOC、DOCX、JPG、PNG 格式，单个文件最大 50MB
        &lt;/p&gt;
      &lt;/Dragger&gt;
    &lt;/div&gt;
  );
};

<span class="keyword">export default</span> UploadArea;
            </div>
        </div>

        <!-- API集成指南 -->
        <div class="section">
            <h2>🔌 API集成指南</h2>
            
            <h3>API服务配置 (services/api.js)</h3>
            <div class="code-block">
<span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;

<span class="comment">// 创建axios实例</span>
<span class="keyword">const</span> api = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL || <span class="string">'http://localhost:8000'</span>,
  timeout: 10000,
  headers: {
    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>
  }
});

<span class="comment">// 请求拦截器</span>
api.interceptors.request.use(
  (config) => {
    <span class="keyword">const</span> token = localStorage.getItem(<span class="string">'token'</span>);
    <span class="keyword">if</span> (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    <span class="keyword">return</span> config;
  },
  (error) => Promise.reject(error)
);

<span class="comment">// 响应拦截器</span>
api.interceptors.response.use(
  (response) => response.data,
  (error) => {
    <span class="keyword">if</span> (error.response?.status === 401) {
      localStorage.removeItem(<span class="string">'token'</span>);
      window.location.href = <span class="string">'/login'</span>;
    }
    <span class="keyword">return</span> Promise.reject(error);
  }
);

<span class="keyword">export default</span> api;
            </div>

            <h3>文档服务 (services/documents.js)</h3>
            <div class="code-block">
<span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'./api'</span>;

<span class="keyword">export</span> <span class="keyword">const</span> documentsService = {
  <span class="comment">// 上传文档</span>
  <span class="function">upload</span>(file, onProgress) {
    <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();
    formData.append(<span class="string">'file'</span>, file);
    
    <span class="keyword">return</span> api.post(<span class="string">'/documents/upload'</span>, formData, {
      headers: { <span class="string">'Content-Type'</span>: <span class="string">'multipart/form-data'</span> },
      onUploadProgress: (progressEvent) => {
        <span class="keyword">const</span> progress = Math.round(
          (progressEvent.loaded * 100) / progressEvent.total
        );
        onProgress && onProgress(progress);
      }
    });
  },

  <span class="comment">// 获取文档列表</span>
  <span class="function">getList</span>(params = {}) {
    <span class="keyword">return</span> api.get(<span class="string">'/documents'</span>, { params });
  },

  <span class="comment">// 获取文档详情</span>
  <span class="function">getDetail</span>(id) {
    <span class="keyword">return</span> api.get(`/documents/${id}`);
  },

  <span class="comment">// 删除文档</span>
  <span class="function">delete</span>(id) {
    <span class="keyword">return</span> api.delete(`/documents/${id}`);
  }
};
            </div>

            <h3>搜索服务 (services/search.js)</h3>
            <div class="code-block">
<span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'./api'</span>;

<span class="keyword">export</span> <span class="keyword">const</span> searchService = {
  <span class="comment">// 自然语言搜索</span>
  <span class="function">naturalLanguageSearch</span>(query, options = {}) {
    <span class="keyword">return</span> api.post(<span class="string">'/search/natural'</span>, {
      query,
      limit: options.limit || 20,
      threshold: options.threshold || 0.7
    });
  },

  <span class="comment">// 关键词搜索</span>
  <span class="function">keywordSearch</span>(keywords, filters = {}) {
    <span class="keyword">return</span> api.post(<span class="string">'/search/keyword'</span>, {
      keywords,
      filters,
      limit: filters.limit || 20
    });
  },

  <span class="comment">// 获取搜索建议</span>
  <span class="function">getSuggestions</span>(query) {
    <span class="keyword">return</span> api.get(<span class="string">'/search/suggestions'</span>, {
      params: { q: query }
    });
  }
};
            </div>
        </div>

        <!-- 状态管理 -->
        <div class="section">
            <h2>🔄 状态管理</h2>
            
            <h3>Redux Store配置 (store/index.js)</h3>
            <div class="code-block">
<span class="keyword">import</span> { configureStore } <span class="keyword">from</span> <span class="string">'@reduxjs/toolkit'</span>;
<span class="keyword">import</span> authSlice <span class="keyword">from</span> <span class="string">'./authSlice'</span>;
<span class="keyword">import</span> documentsSlice <span class="keyword">from</span> <span class="string">'./documentsSlice'</span>;
<span class="keyword">import</span> searchSlice <span class="keyword">from</span> <span class="string">'./searchSlice'</span>;

<span class="keyword">export</span> <span class="keyword">const</span> store = configureStore({
  reducer: {
    auth: authSlice,
    documents: documentsSlice,
    search: searchSlice
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: [<span class="string">'persist/PERSIST'</span>]
      }
    })
});

<span class="keyword">export</span> <span class="keyword">type</span> RootState = ReturnType&lt;<span class="keyword">typeof</span> store.getState&gt;;
<span class="keyword">export</span> <span class="keyword">type</span> AppDispatch = <span class="keyword">typeof</span> store.dispatch;
            </div>

            <h3>文档状态切片 (store/documentsSlice.js)</h3>
            <div class="code-block">
<span class="keyword">import</span> { createSlice, createAsyncThunk } <span class="keyword">from</span> <span class="string">'@reduxjs/toolkit'</span>;
<span class="keyword">import</span> { documentsService } <span class="keyword">from</span> <span class="string">'../services/documents'</span>;

<span class="comment">// 异步actions</span>
<span class="keyword">export</span> <span class="keyword">const</span> fetchDocuments = createAsyncThunk(
  <span class="string">'documents/fetchDocuments'</span>,
  <span class="keyword">async</span> (params) => {
    <span class="keyword">const</span> response = <span class="keyword">await</span> documentsService.getList(params);
    <span class="keyword">return</span> response;
  }
);

<span class="keyword">export</span> <span class="keyword">const</span> uploadDocument = createAsyncThunk(
  <span class="string">'documents/uploadDocument'</span>,
  <span class="keyword">async</span> ({ file, onProgress }) => {
    <span class="keyword">const</span> response = <span class="keyword">await</span> documentsService.upload(file, onProgress);
    <span class="keyword">return</span> response;
  }
);

<span class="keyword">const</span> documentsSlice = createSlice({
  name: <span class="string">'documents'</span>,
  initialState: {
    list: [],
    total: 0,
    loading: false,
    error: null,
    uploadProgress: {}
  },
  reducers: {
    <span class="function">setUploadProgress</span>: (state, action) => {
      <span class="keyword">const</span> { fileId, progress } = action.payload;
      state.uploadProgress[fileId] = progress;
    },
    <span class="function">clearError</span>: (state) => {
      state.error = null;
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(fetchDocuments.pending, (state) => {
        state.loading = <span class="keyword">true</span>;
        state.error = null;
      })
      .addCase(fetchDocuments.fulfilled, (state, action) => {
        state.loading = <span class="keyword">false</span>;
        state.list = action.payload.documents;
        state.total = action.payload.total;
      })
      .addCase(fetchDocuments.rejected, (state, action) => {
        state.loading = <span class="keyword">false</span>;
        state.error = action.error.message;
      });
  }
});

<span class="keyword">export</span> <span class="keyword">const</span> { setUploadProgress, clearError } = documentsSlice.actions;
<span class="keyword">export default</span> documentsSlice.reducer;
            </div>
        </div>

        <!-- 开发流程 -->
        <div class="section">
            <h2>🚀 开发流程</h2>
            
            <h3>环境搭建</h3>
            <div class="code-block">
<span class="comment"># 1. 创建项目</span>
npm create vite@latest contract-archive-frontend -- --template react

<span class="comment"># 2. 进入项目目录</span>
cd contract-archive-frontend

<span class="comment"># 3. 安装依赖</span>
npm install

<span class="comment"># 4. 安装额外依赖</span>
npm install antd @reduxjs/toolkit react-redux axios echarts echarts-for-react

<span class="comment"># 5. 安装开发依赖</span>
npm install -D @types/react @types/react-dom eslint prettier

<span class="comment"># 6. 启动开发服务器</span>
npm run dev
            </div>

            <h3>开发检查清单</h3>
            <ul class="checklist">
                <li>项目初始化和依赖安装</li>
                <li>设计规范CSS变量定义</li>
                <li>基础布局组件开发</li>
                <li>核心业务组件开发</li>
                <li>API服务层集成</li>
                <li>状态管理配置</li>
                <li>路由配置和页面组装</li>
                <li>响应式设计适配</li>
                <li>性能优化和代码分割</li>
                <li>单元测试编写</li>
                <li>端到端测试</li>
                <li>生产环境构建和部署</li>
            </ul>

            <div class="info-box">
                <h4>💡 开发建议</h4>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>严格按照设计稿实现，保持像素级精度</li>
                    <li>优先实现核心功能，再完善细节交互</li>
                    <li>及时与设计师沟通，确保实现效果符合预期</li>
                    <li>注重代码质量和可维护性</li>
                    <li>做好错误处理和用户反馈</li>
                </ul>
            </div>
        </div>

        <!-- 测试指南 -->
        <div class="section">
            <h2>🧪 测试指南</h2>
            
            <h3>单元测试示例</h3>
            <div class="code-block">
<span class="keyword">import</span> { render, screen, fireEvent } <span class="keyword">from</span> <span class="string">'@testing-library/react'</span>;
<span class="keyword">import</span> { Provider } <span class="keyword">from</span> <span class="string">'react-redux'</span>;
<span class="keyword">import</span> { store } <span class="keyword">from</span> <span class="string">'../store'</span>;
<span class="keyword">import</span> SearchBox <span class="keyword">from</span> <span class="string">'../components/Search/SearchBox'</span>;

<span class="function">describe</span>(<span class="string">'SearchBox Component'</span>, () => {
  <span class="keyword">const</span> <span class="function">renderWithProvider</span> = (component) => {
    <span class="keyword">return</span> render(
      &lt;Provider store={store}&gt;
        {component}
      &lt;/Provider&gt;
    );
  };

  <span class="function">test</span>(<span class="string">'renders search input correctly'</span>, () => {
    <span class="keyword">const</span> mockOnSearch = jest.fn();
    renderWithProvider(&lt;SearchBox onSearch={mockOnSearch} /&gt;);
    
    <span class="keyword">const</span> searchInput = screen.getByPlaceholderText(/帮我找一下/i);
    expect(searchInput).toBeInTheDocument();
  });

  <span class="function">test</span>(<span class="string">'calls onSearch when input changes'</span>, () => {
    <span class="keyword">const</span> mockOnSearch = jest.fn();
    renderWithProvider(&lt;SearchBox onSearch={mockOnSearch} /&gt;);
    
    <span class="keyword">const</span> searchInput = screen.getByPlaceholderText(/帮我找一下/i);
    fireEvent.change(searchInput, { target: { value: <span class="string">'test query'</span> } });
    
    expect(mockOnSearch).toHaveBeenCalledWith(<span class="string">'test query'</span>);
  });

  <span class="function">test</span>(<span class="string">'renders suggestions correctly'</span>, () => {
    <span class="keyword">const</span> suggestions = [<span class="string">'设备采购'</span>, <span class="string">'服务协议'</span>];
    renderWithProvider(
      &lt;SearchBox onSearch={jest.fn()} suggestions={suggestions} /&gt;
    );
    
    suggestions.forEach(suggestion => {
      expect(screen.getByText(suggestion)).toBeInTheDocument();
    });
  });
});
            </div>

            <h3>E2E测试示例</h3>
            <div class="code-block">
<span class="comment">// cypress/integration/search.spec.js</span>
<span class="function">describe</span>(<span class="string">'Search Functionality'</span>, () => {
  <span class="function">beforeEach</span>(() => {
    cy.visit(<span class="string">'/search'</span>);
  });

  <span class="function">it</span>(<span class="string">'should perform search and display results'</span>, () => {
    <span class="comment">// 输入搜索关键词</span>
    cy.get(<span class="string">'[data-testid="search-input"]'</span>)
      .type(<span class="string">'设备采购合同'</span>);

    <span class="comment">// 点击搜索按钮</span>
    cy.get(<span class="string">'[data-testid="search-button"]'</span>).click();

    <span class="comment">// 验证搜索结果</span>
    cy.get(<span class="string">'[data-testid="search-results"]'</span>)
      .should(<span class="string">'be.visible'</span>);
    
    cy.get(<span class="string">'[data-testid="result-item"]'</span>)
      .should(<span class="string">'have.length.greaterThan'</span>, 0);
  });

  <span class="function">it</span>(<span class="string">'should filter results correctly'</span>, () => {
    <span class="comment">// 设置筛选条件</span>
    cy.get(<span class="string">'[data-testid="filter-type"]'</span>)
      .select(<span class="string">'采购合同'</span>);
    
    cy.get(<span class="string">'[data-testid="filter-amount"]'</span>)
      .type(<span class="string">'100000'</span>);

    <span class="comment">// 执行搜索</span>
    cy.get(<span class="string">'[data-testid="search-button"]'</span>).click();

    <span class="comment">// 验证筛选结果</span>
    cy.get(<span class="string">'[data-testid="result-item"]'</span>)
      .each(($el) => {
        cy.wrap($el).should(<span class="string">'contain'</span>, <span class="string">'采购合同'</span>);
      });
  });
});
            </div>
        </div>

        <!-- 部署指南 -->
        <div class="section">
            <h2>🚀 部署指南</h2>
            
            <h3>生产环境构建</h3>
            <div class="code-block">
<span class="comment"># 1. 安装依赖</span>
npm ci

<span class="comment"># 2. 运行测试</span>
npm run test

<span class="comment"># 3. 构建生产版本</span>
npm run build

<span class="comment"># 4. 预览构建结果</span>
npm run preview
            </div>

            <h3>环境变量配置</h3>
            <div class="code-block">
<span class="comment"># .env.production</span>
REACT_APP_API_BASE_URL=https://api.contract-archive.com
REACT_APP_UPLOAD_MAX_SIZE=52428800
REACT_APP_SUPPORTED_FORMATS=pdf,doc,docx,jpg,png
REACT_APP_ANALYTICS_ID=your-analytics-id
            </div>

            <div class="warning-box">
                <h4>⚠️ 部署注意事项</h4>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>确保API服务器已正确配置CORS</li>
                    <li>检查所有环境变量是否正确设置</li>
                    <li>验证文件上传功能在生产环境中正常工作</li>
                    <li>配置适当的缓存策略</li>
                    <li>设置错误监控和日志收集</li>
                </ul>
            </div>
        </div>

        <!-- 交接清单 -->
        <div class="section">
            <h2>📋 交接清单</h2>
            
            <div class="grid-2">
                <div class="card">
                    <h4>🎨 设计资源</h4>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>设计分析报告</li>
                        <li>线框图设计</li>
                        <li>视觉设计稿</li>
                        <li>高保真原型</li>
                        <li>设计规范文档</li>
                        <li>组件库设计</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>💻 技术文档</h4>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>API接口文档</li>
                        <li>前端技术指南</li>
                        <li>开发环境配置</li>
                        <li>代码示例和模板</li>
                        <li>测试用例和规范</li>
                        <li>部署和运维指南</li>
                    </ul>
                </div>
            </div>

            <h3>后续支持</h3>
            <div class="info-box">
                <h4>🤝 设计师支持承诺</h4>
                <p>作为UI/UX设计师Sophia，我承诺在开发过程中提供以下支持：</p>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>设计答疑</strong>：解答设计意图和实现细节问题</li>
                    <li><strong>视觉验收</strong>：协助验收开发成果是否符合设计预期</li>
                    <li><strong>优化建议</strong>：根据开发反馈优化设计方案</li>
                    <li><strong>用户测试</strong>：协助进行用户体验测试和改进</li>
                    <li><strong>迭代支持</strong>：支持后续版本的设计迭代</li>
                </ul>
            </div>

            <div class="highlight-box">
                <h4>📞 联系方式</h4>
                <p>开发过程中如有任何设计相关问题，请随时联系：</p>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>设计师</strong>：Sophia (UI/UX Designer)</li>
                    <li><strong>响应时间</strong>：工作日24小时内回复</li>
                    <li><strong>沟通方式</strong>：项目协作平台 / 即时通讯</li>
                    <li><strong>设计评审</strong>：每周定期评审会议</li>
                </ul>
            </div>
        </div>

        <div style="text-align: center; padding: 30px; color: #718096; border-top: 1px solid #e2e8f0; margin-top: 40px;">
            <p>🎨 开发交接文档：Sophia UX Design → Frontend Team | 📅 2024年12月</p>
            <p><em>"设计的价值在于实现，期待看到美好的设计变为现实"</em></p>
        </div>
    </div>
</body>
</html>